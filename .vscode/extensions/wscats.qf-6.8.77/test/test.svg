<svg style="left: 0px; top: 0px; width: 100%; height: 100%; display: block; min-width: 1034px; min-height: 792px; background-color: rgb(255, 255, 255); background-image: none;"><defs><filter id="dropShadow"><feGaussianBlur in="SourceAlpha" stdDeviation="1.7" result="blur"></feGaussianBlur><feOffset in="blur" dx="3" dy="3" result="offsetBlur"></feOffset><feFlood flood-color="#3D4574" flood-opacity="0.4" result="offsetColor"></feFlood><feComposite in="offsetColor" in2="offsetBlur" operator="in" result="offsetBlur"></feComposite><feBlend in="SourceGraphic" in2="offsetBlur"></feBlend></filter></defs><g transformOrigin="0 0" transform="scale(0.98,0.98)translate(38,-120)"><g></g><g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 165 151 L 165 128 L 445 128 L 445 151" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><path d="M 165 151 L 165 920 L 445 920 L 445 151" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 165 151 L 165 920 L 445 920 L 445 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 165 151 L 445 151" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 165 151 L 445 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path></g><g style=""><g transform="translate(266,135)"><foreignObject style="overflow:visible;" pointer-events="all" width="78" height="12"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 80px; white-space: normal; overflow-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">core/behavior</div></div></foreignObject></g></g><g style="visibility: visible;"><image x="170" y="133" width="9" height="9" xlink:href="https://iwiki.oa.tencent.com/download/resources/com.mxgraph.confluence.plugins.diagramly:drawio-editor/mxgraph/images/expanded.gif" preserveAspectRatio="none"></image></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 307 218 L 307 253.63" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 307 218 L 307 253.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 307 258.88 L 303.5 251.88 L 307 253.63 L 310.5 251.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="252" y="168" width="110" height="50" fill="#edf7fc" stroke="#6c8ebf" pointer-events="all"></rect></g><g style=""><g transform="translate(278,180)"><foreignObject style="overflow:visible;" pointer-events="all" width="59" height="26"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">«interface»<br><b>index.js</b></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="252" y="260" width="110" height="50" fill="#edf7fc" stroke="#6c8ebf" pointer-events="all"></rect></g><g style=""><g transform="translate(283,272)"><foreignObject style="overflow:visible;" pointer-events="all" width="49" height="26"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">«excute»<br><b>api.js</b></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 307 410 L 307 453.63" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 307 410 L 307 453.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 307 458.88 L 303.5 451.88 L 307 453.63 L 310.5 451.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="239.5" y="360" width="135" height="50" fill="#edf7fc" stroke="#6c8ebf" pointer-events="all"></rect></g><g style=""><g transform="translate(248,372)"><foreignObject style="overflow:visible;" pointer-events="all" width="119" height="26"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">«apply»<br><b>applyBehaviorEdit.js</b></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 307 510 L 307 553.63" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 307 510 L 307 553.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 307 558.88 L 303.5 551.88 L 307 553.63 L 310.5 551.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="239.5" y="460" width="135" height="50" fill="#edf7fc" stroke="#6c8ebf" pointer-events="all"></rect></g><g style=""><g transform="translate(248,472)"><foreignObject style="overflow:visible;" pointer-events="all" width="119" height="26"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">«applyLocalRequest»<br><b>applyBehaviorEdit.js</b></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="239.5" y="560" width="135" height="50" fill="#edf7fc" stroke="#6c8ebf" pointer-events="all"></rect></g><g style=""><g transform="translate(248,572)"><foreignObject style="overflow:visible;" pointer-events="all" width="119" height="26"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">«applyLocal»<br><b>applyBehaviorEdit.js</b></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="239.5" y="610" width="130" height="70" fill="none" stroke="white" pointer-events="stroke" visibility="hidden" stroke-width="9"></rect><rect x="239.5" y="610" width="130" height="70" fill="none" stroke="none" pointer-events="all"></rect></g><g style=""><g transform="translate(242,613)"><foreignObject style="overflow:visible;" pointer-events="all" width="112" height="58"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><p style="line-height: 140%">压入撤销重做堆栈<br>request是否过大判断<br>提交mutation</p></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 445 151 L 445 128 L 725 128 L 725 151" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><path d="M 445 151 L 445 920 L 725 920 L 725 151" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 445 151 L 445 920 L 725 920 L 725 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 445 151 L 725 151" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 445 151 L 725 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path></g><g style=""><g transform="translate(560,135)"><foreignObject style="overflow:visible;" pointer-events="all" width="50" height="12"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 52px; white-space: normal; overflow-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">core/app</div></div></foreignObject></g></g><g style="visibility: visible;"><image x="450" y="133" width="9" height="9" xlink:href="https://iwiki.oa.tencent.com/download/resources/com.mxgraph.confluence.plugins.diagramly:drawio-editor/mxgraph/images/expanded.gif" preserveAspectRatio="none"></image></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="529.5" y="260" width="110" height="50" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"></rect></g><g style=""><g transform="translate(543,272)"><foreignObject style="overflow:visible;" pointer-events="all" width="83" height="26"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">«interface»<br><b>behaviorApi.js</b></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 584.5 610 L 584.5 643.63" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 584.5 610 L 584.5 643.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 584.5 648.88 L 581 641.88 L 584.5 643.63 L 588 641.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="517" y="560" width="135" height="50" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"></rect></g><g style=""><g transform="translate(523,572)"><foreignObject style="overflow:visible;" pointer-events="all" width="124" height="26"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">«commitMutationCore»<br><b>dataCallCore.js</b></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="517" y="650" width="135" height="50" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"></rect></g><g style=""><g transform="translate(541,662)"><foreignObject style="overflow:visible;" pointer-events="all" width="87" height="26"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">«commit»<br><b>dataCallCore.js</b></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="564.5" y="530" width="160" height="20" fill="none" stroke="white" pointer-events="stroke" visibility="hidden" stroke-width="9"></rect><rect x="564.5" y="530" width="160" height="20" fill="none" stroke="none" pointer-events="all"></rect></g><g style=""><g transform="translate(567,533)"><foreignObject style="overflow:visible;" pointer-events="all" width="142" height="12"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">含mutation是否要落盘判断</div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 725 151 L 725 128 L 1010 128 L 1010 151" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><path d="M 725 151 L 725 920 L 1010 920 L 1010 151" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 725 151 L 725 920 L 1010 920 L 1010 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 725 151 L 1010 151" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 725 151 L 1010 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path></g><g style=""><g transform="translate(830,135)"><foreignObject style="overflow:visible;" pointer-events="all" width="75" height="12"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 75px; white-space: normal; overflow-wrap: normal; font-weight: bold; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">core/network</div></div></foreignObject></g></g><g style="visibility: visible;"><image x="730" y="133" width="9" height="9" xlink:href="https://iwiki.oa.tencent.com/download/resources/com.mxgraph.confluence.plugins.diagramly:drawio-editor/mxgraph/images/expanded.gif" preserveAspectRatio="none"></image></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 865 700 L 865 773.63" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 865 700 L 865 773.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"></path><path d="M 865 778.88 L 861.5 771.88 L 865 773.63 L 868.5 771.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="797.5" y="650" width="135" height="50" fill="#fff2cc" stroke="#d6b656" pointer-events="all"></rect></g><g style=""><g transform="translate(800,662)"><foreignObject style="overflow:visible;" pointer-events="all" width="131" height="26"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">«addUserChange»<br><b>SendMessageCenter.ts</b></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="797.5" y="780" width="135" height="50" fill="#fff2cc" stroke="#d6b656" pointer-events="all"></rect></g><g style=""><g transform="translate(800,792)"><foreignObject style="overflow:visible;" pointer-events="all" width="131" height="26"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">«_checkAndSend»<br><b>SendMessageCenter.ts</b></div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="870" y="730" width="140" height="20" fill="none" stroke="white" pointer-events="stroke" visibility="hidden" stroke-width="9"></rect><rect x="870" y="730" width="140" height="20" fill="none" stroke="none" pointer-events="all"></rect></g><g style=""><g transform="translate(872,733)"><foreignObject style="overflow:visible;" pointer-events="all" width="127" height="12"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">每隔 500ms 检查并发送</div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 140 200 L 247.63 200" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 140 200 L 247.63 200" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 252.88 200 L 245.88 203.5 L 247.63 200 L 245.88 196.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><rect x="-30" y="190" width="170" height="20" fill="none" stroke="white" pointer-events="stroke" visibility="hidden" stroke-width="9"></rect><rect x="-30" y="190" width="170" height="20" fill="none" stroke="#000000" pointer-events="all"></rect></g><g style=""><g transform="translate(-27,194)"><foreignObject style="overflow:visible;" pointer-events="all" width="153" height="12"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000000;line-height:1.2;vertical-align:top;white-space:nowrap;text-align:left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Behavior.apiExcute(xxx, xxx)</div></div></foreignObject></g></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 362 285 L 523.13 285" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 362 285 L 523.13 285" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 528.38 285 L 521.38 288.5 L 523.13 285 L 521.38 281.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 584 310 L 584 385 L 380.87 385" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 584 310 L 584 385 L 380.87 385" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 375.62 385 L 382.62 381.5 L 380.87 385 L 382.62 388.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 374.5 585 L 510.63 585" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 374.5 585 L 510.63 585" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 515.88 585 L 508.88 588.5 L 510.63 585 L 508.88 581.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path></g><g transform="translate(0.5,0.5)" style="visibility: visible;"><path d="M 652 675 L 791.13 675" fill="none" stroke="white" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden" stroke-width="9"></path><path d="M 652 675 L 791.13 675" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 796.38 675 L 789.38 678.5 L 791.13 675 L 789.38 671.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path></g></g><g></g><g></g></g></svg>