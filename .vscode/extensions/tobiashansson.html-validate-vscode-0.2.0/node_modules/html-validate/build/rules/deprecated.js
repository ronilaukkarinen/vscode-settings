"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const context_1 = require("../context");
const rule_1 = require("../rule");
class Deprecated extends rule_1.Rule {
    documentation() {
        return {
            description: "HTML5 deprecated many old elements and they should not be used in new code.",
            url: rule_1.ruleDocumentationUrl(__filename),
        };
    }
    setup() {
        this.on("tag:open", (event) => {
            const node = event.target;
            /* cannot validate if meta isn't known */
            if (node.meta === null) {
                return;
            }
            const deprecated = node.meta.deprecated;
            if (deprecated) {
                const location = context_1.sliceLocation(event.location, 1);
                if (typeof deprecated === "string") {
                    this.report(node, `<${node.tagName}> is deprecated: ${deprecated}`, location);
                }
                else {
                    this.report(node, `<${node.tagName}> is deprecated`, location);
                }
            }
        });
    }
}
module.exports = Deprecated;
