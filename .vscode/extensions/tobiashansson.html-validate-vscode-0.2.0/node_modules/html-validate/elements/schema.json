{
  "$id": "https://html-validate.org/schemas/metadata.json",
  "type": "object",
  "patternProperties": {
    "^.*$": {
      "type": "object",
      "properties": {
        "embedded": { "$ref": "#/definitions/contentCategory" },
        "flow": { "$ref": "#/definitions/contentCategory" },
        "heading": { "$ref": "#/definitions/contentCategory" },
        "interactive": { "$ref": "#/definitions/contentCategory" },
        "metadata": { "$ref": "#/definitions/contentCategory" },
        "phrasing": { "$ref": "#/definitions/contentCategory" },
        "sectioning": { "$ref": "#/definitions/contentCategory" },

        "deprecated": {
          "anyOf": [{ "type": "boolean" }, { "type": "string" }]
        },
        "foreign": { "type": "boolean" },
        "void": { "type": "boolean" },
        "transparent": { "type": "boolean" },
        "implicitClosed": { "type": "array", "contains": { "type": "string" } },

        "deprecatedAttributes": {
          "type": "array",
          "contains": { "type": "string" }
        },
        "requiredAttributes": {
          "type": "array",
          "contains": { "type": "string" }
        },
        "attributes": { "$ref": "#/definitions/PermittedAttribute" },

        "permittedContent": { "$ref": "#/definitions/Permitted" },
        "permittedDescendants": { "$ref": "#/definitions/Permitted" },
        "permittedOrder": { "$ref": "#/definitions/PermittedOrder" },
        "requiredAncestors": { "$ref": "#/definitions/RequiredAncestors" }
      },
      "additionalProperties": false
    }
  },

  "definitions": {
    "contentCategory": {
      "anyOf": [{ "type": "boolean" }, { "$ref": "#/definitions/expression" }]
    },

    "expression": {
      "type": "array",
      "items": [
        {
          "type": "string",
          "enum": ["isDescendant", "hasAttribute", "matchAttribute"]
        },
        {
          "anyOf": [{ "type": "string" }, { "$ref": "#/definitions/operation" }]
        }
      ]
    },

    "operation": {
      "type": "array",
      "items": [
        {
          "type": "string"
        },
        {
          "type": "string",
          "enum": ["!=", "="]
        },
        {
          "type": "string"
        }
      ]
    },

    "Permitted": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "$ref": "#/definitions/PermittedGroup"
          }
        ]
      }
    },

    "PermittedAttribute": {
      "type": "object",
      "patternProperties": {
        "^.*$": {
          "type": "array",
          "uniqueItems": true,
          "items": { "type": "string" }
        }
      }
    },

    "PermittedGroup": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "exclude": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "string"
            }
          ]
        }
      }
    },

    "PermittedOrder": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },

    "RequiredAncestors": {
      "type": "array",
      "items": {
        "type": "string"
      }
    }
  }
}
